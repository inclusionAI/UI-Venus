# UI-Venus-1.5 æ™ºèƒ½ä½“æ¡†æ¶

**[English](./README.md)**

åŸºäº UI-Venus-1.5 çš„ Android è‡ªåŠ¨åŒ–æ™ºèƒ½ä½“æ¡†æ¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– åŸºäºè§†è§‰è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½å†³ç­–
- ğŸ“± æ”¯æŒ 40+ æ¬¾ä¸»æµä¸­æ–‡åº”ç”¨
- ğŸ”„ å¤šè®¾å¤‡å¹¶è¡Œæ‰¹é‡æ‰§è¡Œ
- ğŸ“Š å®Œæ•´çš„è½¨è¿¹è®°å½•ä¸å›æ”¾
- ğŸ” æ™ºèƒ½é‡å¤åŠ¨ä½œæ£€æµ‹ï¼Œé¿å…æ­»å¾ªç¯

> âš ï¸ æœ¬é¡¹ç›®ä»…ä¾›ç ”ç©¶å’Œå­¦ä¹ ä½¿ç”¨ã€‚

---

## ç¯å¢ƒå‡†å¤‡

### 1. Python ç¯å¢ƒ

å»ºè®®ä½¿ç”¨ Python 3.10 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚

### 2. å®‰è£… ADB

ä¸‹è½½ ADB å¹³å°å·¥å…·ï¼ˆGoogle å®˜æ–¹ Android SDK Platform Toolsï¼‰ï¼Œæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼š

```bash
export PATH=${PATH}:~/Downloads/platform-tools
```

### 3. æ‰‹æœºé…ç½®

**å¯ç”¨å¼€å‘è€…æ¨¡å¼ï¼š**
1. è¿›å…¥ `è®¾ç½® â†’ å…³äºæ‰‹æœº â†’ ç‰ˆæœ¬å·`ï¼Œè¿ç»­ç‚¹å‡» 7-10 æ¬¡
2. å‡ºç°"å¼€å‘è€…æ¨¡å¼å·²å¯ç”¨"æç¤º

**å¯ç”¨ USB è°ƒè¯•ï¼š**
1. è¿›å…¥ `è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹`
2. å¼€å¯ `USB è°ƒè¯•`
3. éƒ¨åˆ†æœºå‹éœ€è¦åŒæ—¶å¼€å¯ `USB è°ƒè¯•(å®‰å…¨è®¾ç½®)`

### 4. å®‰è£… ADB Keyboard

ä¸‹è½½å®‰è£… ADB Keyboard APKï¼ˆGitHub æœç´¢ senzhk/ADBKeyBoardï¼‰ã€‚

```bash
adb shell ime enable com.android.adbkeyboard/.AdbIME
```

---

## å®‰è£…ä¾èµ–

```bash
pip install -r requirement.txt
adb devices  # éªŒè¯è¿æ¥
```

---

## é…ç½®è¯´æ˜

ç¼–è¾‘ `config/ui_venus_single.yaml`ï¼š

```yaml
policy:
  type: "ui_venus"
  params:
    model_host: "http://your-model-server"
    model_port: 8000
    model_name: "model"
    temperature: 0.0
```

**ä½¿ç”¨ vLLM éƒ¨ç½²æ¨¡å‹ï¼š**

```bash
python3 -m vllm.entrypoints.openai.api_server \
  --served-model-name model \
  --model /path/to/ui-venus-1.5 \
  --port 8000
```

---

## ä½¿ç”¨æ–¹æ³•

### å•ä»»åŠ¡æ‰§è¡Œ

```bash
python main.py \
  --device-id "192.168.1.100:5555" \
  --purpose "æ‰“å¼€å°çº¢ä¹¦ï¼Œæœç´¢ç©¿æ­å¸–å­" \
  --trace-dir "record/traces/"
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•° | è¯´æ˜ | å¿…å¡« |
|-----|------|:----:|
| `--config` | é…ç½®æ–‡ä»¶è·¯å¾„ | å¦ |
| `--device-id` | è®¾å¤‡ IDï¼ˆIP:ç«¯å£ æˆ– åºåˆ—å·ï¼‰ | å¦ |
| `--purpose` | ä»»åŠ¡æè¿° | âœ… |
| `--trace-dir` | è½¨è¿¹ä¿å­˜ç›®å½• | âœ… |
| `--step-limit` | æœ€å¤§æ­¥æ•° | å¦ |
| `--model-host` | æ¨¡å‹æœåŠ¡åœ°å€ | å¦ |
| `--log-file` | æ—¥å¿—æ–‡ä»¶è·¯å¾„ | å¦ |
| `--save-dir` | æˆªå›¾ä¿å­˜ç›®å½• | å¦ |

### æ‰¹é‡ä»»åŠ¡æ‰§è¡Œ

**1. ç¼–è¾‘ä»»åŠ¡åˆ—è¡¨** `data/purpose.txt`ï¼ˆæ¯è¡Œä¸€ä¸ªä»»åŠ¡ï¼‰ï¼š

```
æ‰“å¼€å¾®åšï¼Œæœç´¢æ­å·å¤©æ°”
æ‰“å¼€ç¾å›¢ï¼Œæœç´¢é™„è¿‘çš„ç«é”…åº—
```

**2. é…ç½®å¤šè®¾å¤‡** `config/config_multi.yaml`ï¼š

```yaml
devices:
  - "192.168.1.100:5555"
  - "192.168.1.101:5555"

ep_config:
  step_limit: 30

policy:
  type: "ui_venus"
  params:
    model_host: "http://your-model-server"
    model_name: "model"

record_config:
  save_dir: "record/batch/"

trace_dir: "record/traces/"
single_task_config: "config/ui_venus_single.yaml"
```

**3. è¿è¡Œï¼š**

```bash
python batch_runner.py
```

**è¾“å‡ºç»“æ„ï¼š**

```
record/batch/
â”œâ”€â”€ task_0/
â”‚   â”œâ”€â”€ task.log          # æ‰§è¡Œæ—¥å¿—ï¼ˆå«æ¨¡å‹æ€è€ƒè¿‡ç¨‹ï¼‰
â”‚   â””â”€â”€ screenshots/
â”œâ”€â”€ task_1/
â”‚   â””â”€â”€ ...
â””â”€â”€ batch_report_*.json   # æ‰§è¡ŒæŠ¥å‘Š

logs/
â””â”€â”€ batch_runner.log      # æ‰¹é‡æ‰§è¡Œæ€»æ—¥å¿—
```

---

## åŠ¨ä½œç©ºé—´

### åŸºç¡€äº¤äº’

| åŠ¨ä½œ | è¯´æ˜ | å‚æ•° |
|-----|------|------|
| `Click(point)` | ç‚¹å‡»åæ ‡ | `[x, y]` |
| `LongPress(point)` | é•¿æŒ‰ | `[x, y]` |
| `Type(content)` | è¾“å…¥æ–‡æœ¬ï¼ˆè‡ªåŠ¨æ¸…ç©ºï¼‰ | æ–‡æœ¬å†…å®¹ |

### æ»‘åŠ¨æ“ä½œ

| åŠ¨ä½œ | è¯´æ˜ | å‚æ•° |
|-----|------|------|
| `Scroll(direction)` | æ»‘åŠ¨å±å¹• | `up/down/left/right` |
| `Drag(start, end)` | æ‹–æ‹½æ“ä½œ | `[x, y]` â†’ `[x, y]` |

### ç³»ç»ŸæŒ‰é”®

| åŠ¨ä½œ | è¯´æ˜ |
|-----|------|
| `PressBack` | è¿”å›ä¸Šä¸€é¡µ |
| `PressHome` | å›åˆ°æ¡Œé¢ |
| `PressEnter` | æŒ‰å›è½¦é”® |
| `PressRecent` | æœ€è¿‘åº”ç”¨ |

### åº”ç”¨æ§åˆ¶

| åŠ¨ä½œ | è¯´æ˜ | å‚æ•° |
|-----|------|------|
| `Launch(app_name)` | å¯åŠ¨åº”ç”¨ | åº”ç”¨åç§° |
| `Wait` | ç­‰å¾…åŠ è½½ | æ—¶é•¿ï¼ˆmsï¼‰ |
| `Finished` | ä»»åŠ¡å®Œæˆ | - |
| `CallUser` | è¯·æ±‚äººå·¥æ¥ç®¡ | åŸå› è¯´æ˜ |

---

## æ”¯æŒçš„åº”ç”¨

é¢„é…ç½®äº† 50+ æ¬¾ä¸»æµä¸­æ–‡åº”ç”¨ï¼š

| åˆ†ç±» | åº”ç”¨ |
|-----|------|
| ç¤¾äº¤åª’ä½“ | å¾®åšã€å°çº¢ä¹¦ã€çŸ¥ä¹ã€è±†ç“£ |
| ç”µå•†è´­ç‰© | æ‹¼å¤šå¤šã€å”¯å“ä¼š |
| å¤–å–ç¾é£Ÿ | ç¾å›¢ã€ç¾å›¢å¤–å–ã€é¥¿äº†ä¹ˆã€å¤§ä¼—ç‚¹è¯„ |
| å‡ºè¡Œæ—…æ¸¸ | æºç¨‹ã€åŒç¨‹ã€æ»´æ»´ã€ç™¾åº¦åœ°å›¾ |
| è§†é¢‘å¨±ä¹ | å“”å“©å“”å“©ã€å¿«æ‰‹ã€è…¾è®¯è§†é¢‘ã€çˆ±å¥‡è‰ºã€ä¼˜é…· |
| éŸ³ä¹éŸ³é¢‘ | QQéŸ³ä¹ã€é…·æˆ‘éŸ³ä¹ã€å–œé©¬æ‹‰é›…ã€æ±½æ°´éŸ³ä¹ |
| èµ„è®¯é˜…è¯» | ä»Šæ—¥å¤´æ¡ã€ç•ªèŒ„å°è¯´ã€ä¸ƒçŒ«å°è¯´ |
| åŠå…¬å·¥å…· | WPSã€é£ä¹¦ |
| AI åº”ç”¨ | å…ƒå®ã€è±†åŒ…ã€åƒé—® |
| ç”Ÿæ´»æœåŠ¡ | æ”¯ä»˜å®ã€58åŒåŸã€è´å£³æ‰¾æˆ¿ã€å®‰å±…å®¢ |

å®Œæ•´åˆ—è¡¨è§ï¼š`config/app_mapping.yaml`

---

## é¡¹ç›®ç»“æ„

```
hunter_framework/
â”œâ”€â”€ main.py                 # å•ä»»åŠ¡å…¥å£
â”œâ”€â”€ batch_runner.py         # æ‰¹é‡ä»»åŠ¡æ‰§è¡Œå™¨
â”œâ”€â”€ requirement.txt         # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ ui_venus_single.yaml    # å•ä»»åŠ¡é…ç½®
â”‚   â”œâ”€â”€ config_multi.yaml       # æ‰¹é‡ä»»åŠ¡é…ç½®
â”‚   â””â”€â”€ app_mapping.yaml        # åº”ç”¨æ˜ å°„
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ run_handler.py      # è¿è¡Œå¤„ç†å™¨
â”‚   â”œâ”€â”€ runtime_context.py  # è¿è¡Œæ—¶ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ verify.py           # éªŒè¯å·¥å…·
â”œâ”€â”€ device/
â”‚   â”œâ”€â”€ adb_controller.py   # ADB æ§åˆ¶å™¨
â”‚   â””â”€â”€ device_manager.py   # è®¾å¤‡ç®¡ç†å™¨
â”œâ”€â”€ policy/
â”‚   â”œâ”€â”€ base_policy.py      # ç­–ç•¥åŸºç±»
â”‚   â”œâ”€â”€ ui_venus_policy.py  # UI-Venus ç­–ç•¥
â”‚   â””â”€â”€ qw_utils.py         # å·¥å…·å‡½æ•°
â”œâ”€â”€ processor/
â”‚   â”œâ”€â”€ base_processor.py   # å¤„ç†å™¨åŸºç±»
â”‚   â”œâ”€â”€ uivenus_processor.py # UI-Venus å¤„ç†å™¨
â”‚   â””â”€â”€ rpa_utils/          # RPA å·¥å…·
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ pickle_utils.py     # åºåˆ—åŒ–å·¥å…·
â”‚   â””â”€â”€ templates/          # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â””â”€â”€ purpose.txt         # æ‰¹é‡ä»»åŠ¡åˆ—è¡¨
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â””â”€â”€ record/                 # è®°å½•ç›®å½•
```

---

## å¸¸è§é—®é¢˜

### è®¾å¤‡æœªæ‰¾åˆ°

```bash
adb kill-server && adb start-server
adb devices
```

æ£€æŸ¥ï¼šUSB è°ƒè¯•æ˜¯å¦å¼€å¯ã€æ•°æ®çº¿æ˜¯å¦æ”¯æŒæ•°æ®ä¼ è¾“ã€æ˜¯å¦ç‚¹å‡»äº†"å…è®¸ USB è°ƒè¯•"

### æ–‡æœ¬è¾“å…¥é—®é¢˜

```bash
adb shell ime set com.android.adbkeyboard/.AdbIME
```

### ä»»åŠ¡é™·å…¥å¾ªç¯

ç³»ç»Ÿå†…ç½®é‡å¤åŠ¨ä½œæ£€æµ‹ï¼Œè¿ç»­ 5 æ¬¡ç›¸åŒåŠ¨ä½œä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼ˆswipe æ“ä½œé™¤å¤–ï¼‰ã€‚

---

## å‘½ä»¤é€ŸæŸ¥

```bash
# ADB è¿æ¥
adb devices
adb connect 192.168.1.100:5555

# å•ä»»åŠ¡æ‰§è¡Œ
python main.py --purpose "ä½ çš„ä»»åŠ¡" --trace-dir "record/traces/"

# æ‰¹é‡ä»»åŠ¡æ‰§è¡Œ
python batch_runner.py

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/batch_runner.log
```

---

## License

æœ¬é¡¹ç›®ä»…ä¾›ç ”ç©¶å’Œå­¦ä¹ ä½¿ç”¨ã€‚
